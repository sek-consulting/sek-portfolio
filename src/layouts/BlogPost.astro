---
import type { CollectionEntry } from "astro:content";
import BaseLayout from "./BaseLayout.astro";

type Props = CollectionEntry<"blog">["data"] & { readingTime: number };

const { title, description, publishDate, tags, readingTime } = Astro.props;
---

<BaseLayout title={title} description={description} tags={tags} type="article">
  <div class="mx-auto my-20 max-w-3xl space-y-12 p-4 md:mt-40">
    <article>
      <div class="mb-12 rounded bg-zinc-200 p-4 dark:bg-zinc-700">
        <h1 class="mb-2 text-4xl font-semibold tracking-tight md:text-6xl">
          {title}
        </h1>
        <div
          class="flex w-full flex-col items-start dark:text-gray-400 md:flex-row md:items-center md:space-x-2"
        >
          <span>Published: <time>{publishDate.toLocaleDateString()}</time></span
          >
          <span class="hidden md:block">&#x2022;</span>
          <span>
            {readingTime} min read
          </span>
        </div>
      </div>
      <div id="content" class="p-4">
        <slot />
      </div>
    </article>
    <div
      class="flex flex-wrap space-x-4 border-t border-dashed border-zinc-400 py-2"
    >
      {
        tags.map((tag) => (
          <a
            href={`/blog/tags/${tag}`}
            class="text-color-gradient text-lg font-semibold"
          >
            #{tag}
          </a>
        ))
      }
    </div>
  </div>
</BaseLayout>

<style>
  /* #content :global() is used to pass it to <slot /> w/o making everything global */
  #content :global(h1) {
    @apply scroll-m-20 text-4xl font-semibold tracking-tight md:text-6xl;
  }
  #content :global(h2) {
    @apply mt-10 scroll-m-20 border-b border-b-zinc-200 pb-2 text-3xl font-semibold tracking-tight transition-colors first:mt-0 dark:border-b-zinc-700;
  }
  #content :global(h3) {
    @apply mt-8 scroll-m-20 text-2xl font-semibold tracking-tight;
  }
  #content :global(h4) {
    @apply mt-8 scroll-m-20 text-xl font-semibold tracking-tight;
  }
  #content :global(p) {
    @apply leading-7 [&:not(:first-child)]:mt-6;
  }
  #content :global(blockquote) {
    @apply mt-6 border-l-2 border-zinc-300 pl-6 italic text-zinc-700 dark:border-zinc-600 dark:text-zinc-200;
  }
  #content :global(ul) {
    @apply my-6 ml-6 list-disc [&>li]:mt-2;
  }
  /* inline code snippets */
  #content :global(*:not(pre) > code) {
    @apply rounded bg-zinc-200 py-[0.2rem] px-[0.3rem] text-sm italic text-zinc-600 dark:bg-zinc-700 dark:text-zinc-400;
  }
  /* code blocks */
  #content :global(pre) {
    @apply rounded !bg-zinc-200 p-2  dark:!bg-zinc-700;
  }
  #content :global(pre code span) {
    @apply !text-zinc-600 dark:!text-zinc-400;
  }
</style>
